# 🎮 游戏助手 - 完整文档

> 经典 H5 小游戏合集，基于 React 和 TypeScript 实现，提供休闲益智游戏体验。

---

## 📖 目录

- [功能概览](#-功能概览)
- [系统架构](#-系统架构)
- [游戏说明](#-游戏说明)
- [组件说明](#-组件说明)
- [数据类型](#-数据类型)
- [使用指南](#-使用指南)

---

## ✨ 功能概览

### 核心功能

| 功能 | 描述 | 状态 |
|------|------|------|
| 🎮 **贪吃蛇** | 经典贪吃蛇游戏，控制蛇吃食物，不断变长 | ✅ 已完成 |
| 🔢 **2048** | 数字合并游戏，滑动数字合成 2048 | ✅ 已完成 |
| 🧱 **打砖块** | 弹球打砖块，消除所有砖块获胜 | 🔜 即将上线 |

### 技术亮点

- **纯前端实现** - 无需后端服务，完全在浏览器中运行
- **响应式设计** - 适配桌面和移动端
- **本地存储** - 最高分记录持久化保存
- **流畅动画** - Canvas 渲染，60fps 丝滑体验
- **多种控制方式** - 键盘、触摸滑动双支持

---

## 🏗️ 系统架构

### 整体架构图

```
┌─────────────────────────────────────────────────────────────────────┐
│                           用户界面层                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │
│  │  GamesPage   │  │  SnakePage   │  │  Game2048Page │              │
│  │  (游戏列表)   │  │  (贪吃蛇)     │  │   (2048)     │              │
│  └──────────────┘  └──────────────┘  └──────────────┘              │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                           组件层                                     │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │
│  │  GameCard    │  │  SnakeGame   │  │   Game2048    │              │
│  │  (游戏卡片)   │  │ (贪吃蛇组件)  │  │  (2048组件)   │              │
│  └──────────────┘  └──────────────┘  └──────────────┘              │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                           数据层                                     │
│  ┌──────────────┐  ┌──────────────┐                                │
│  │   games.ts   │  │  localStorage │                                │
│  │  (游戏数据)   │  │  (最高分)     │                                │
│  └──────────────┘  └──────────────┘                                │
└─────────────────────────────────────────────────────────────────────┘
```

### 数据流

```
用户访问 → /games → 游戏列表页
                 │
                 ├── 点击贪吃蛇 → /games/snake → SnakeGame 组件
                 │                            │
                 │                            ├── 初始化游戏板
                 │                            ├── 监听键盘/触摸
                 │                            ├── 游戏循环渲染
                 │                            └── 最高分保存
                 │
                 └── 点击 2048 → /games/2048 → Game2048 组件
                                             │
                                             ├── 初始化数字
                                             ├── 监听方向键/滑动
                                             ├── 移动合并逻辑
                                             └── 最高分保存
```

---

## 🎮 游戏说明

### 贪吃蛇 (Snake)

**游戏规则：**
- 控制蛇的方向移动
- 吃到食物后蛇身变长，分数增加
- 撞墙或撞到自己游戏结束

**控制方式：**
| 操作 | 键盘 | 触摸 |
|------|------|------|
| 上移 | ↑ / W | 向上滑动 |
| 下移 | ↓ / S | 向下滑动 |
| 左移 | ← / A | 向左滑动 |
| 右移 | → / D | 向右滑动 |
| 暂停/开始 | 空格 | - |

**计分规则：**
- 每吃一个食物：+10 分
- 随着分数增加，蛇的移动速度加快

**技术实现：**
- Canvas 2D 渲染
- `requestAnimationFrame` 游戏循环
- 20×15 网格，每格 20px

### 2048

**游戏规则：**
- 滑动方向键移动所有方块
- 相同数字的方块碰撞会合并
- 每次移动后生成一个新方块（2 或 4）
- 合成 2048 即可获胜，可继续挑战

**控制方式：**
| 操作 | 键盘 | 触摸 |
|------|------|------|
| 上移 | ↑ / W | 向上滑动 |
| 下移 | ↓ / S | 向下滑动 |
| 左移 | ← / A | 向左滑动 |
| 右移 | → / D | 向右滑动 |
| 暂停/开始 | 空格 | - |

**计分规则：**
- 每次合并方块：获得合并后的数值分数
- 例如：两个 4 合并为 8，获得 8 分

**技术实现：**
- DOM + CSS Grid 渲染
- 矩阵旋转算法实现四方向移动
- 4×4 网格

---

## 🧩 组件说明

### 页面组件

| 组件 | 路径 | 说明 |
|------|------|------|
| `GamesPage` | `app/games/page.tsx` | 游戏列表主页面 |
| `SnakePage` | `app/games/snake/page.tsx` | 贪吃蛇游戏页面 |
| `Game2048Page` | `app/games/2048/page.tsx` | 2048 游戏页面 |

### 功能组件

| 组件 | 说明 |
|------|------|
| `GameCard` | 游戏卡片（展示游戏信息，支持点击跳转） |
| `SnakeGame` | 贪吃蛇游戏实现 |
| `Game2048` | 2048 游戏实现 |

### 组件详情

#### GameCard

```typescript
interface GameCardProps {
  game: Game;
}
```

**功能特性：**
- 根据 `status` 显示不同状态
  - `available`: 可点击进入游戏
  - `coming-soon`: 显示"即将上线"
- 渐变边框和图标
- 悬停动画效果

#### SnakeGame

```typescript
// 游戏状态
type GameState = "idle" | "playing" | "paused" | "gameover";

// 核心功能
- 初始化游戏板
- 游戏主循环 (gameLoop)
- 移动蛇身逻辑
- 碰撞检测
- 分数统计
- 最高分保存 (localStorage)
```

**关键函数：**
| 函数 | 说明 |
|------|------|
| `resetGame()` | 重置游戏状态，初始化蛇和食物 |
| `draw()` | 绘制游戏画面 |
| `gameLoop()` | 游戏主循环，控制帧率 |
| `generateFood()` | 生成随机食物位置 |

#### Game2048

```typescript
// 游戏状态
type GameState = "idle" | "playing" | "paused" | "gameover" | "won";

// 核心功能
- 初始化游戏板（生成两个数字）
- 移动合并逻辑
- 随机生成新数字
- 游戏结束检测
- 分数统计
- 最高分保存 (localStorage)
```

**关键函数：**
| 函数 | 说明 |
|------|------|
| `resetBoard()` | 重置游戏板，生成两个初始数字 |
| `moveBoard()` | 移动并合并方块 |
| `spawnTile()` | 在空位置生成新数字（2 或 4） |
| `hasAvailableMoves()` | 检测是否还有可用移动 |

---

## 📦 数据类型

### Game (游戏数据)

```typescript
interface Game {
  /** 游戏唯一标识 */
  id: string;
  /** 游戏名称 */
  name: string;
  /** 游戏描述 */
  description: string;
  /** 图标名称 (lucide-react) */
  icon: string;
  /** 渐变色样式 */
  gradient: string;
  /** 游戏状态 */
  status: "available" | "coming-soon";
}
```

### 游戏配置

#### 贪吃蛇配置

```typescript
const CONFIG = {
  CELL_SIZE: 20,       // 格子大小 (px)
  GRID_WIDTH: 20,      // 横向格子数
  GRID_HEIGHT: 15,     // 纵向格子数
  INITIAL_SPEED: 150,  // 初始速度 (ms)
  MIN_SPEED: 50,       // 最快速度 (ms)
  SPEED_INCREMENT: 5,  // 每吃一个食物加速 (ms)
} as const;
```

#### 2048 配置

```typescript
const CONFIG = {
  GRID_SIZE: 4,        // 网格大小 4×4
  TARGET_VALUE: 2048,  // 目标数字
} as const;
```

### 数字颜色映射 (2048)

| 数字 | 背景色 | 文字色 |
|------|--------|--------|
| 2 | amber-100 | amber-900 |
| 4 | amber-200 | amber-900 |
| 8 | amber-300 | amber-900 |
| 16 | amber-400 | amber-900 |
| 32 | amber-500 | white |
| 64 | amber-600 | white |
| 128 | yellow-400 | yellow-900 |
| 256 | yellow-500 | white |
| 512 | yellow-600 | white |
| 1024 | yellow-500 | white |
| 2048 | yellow-400 | yellow-900 |

---

## 📱 使用指南

### 访问游戏

1. 从首页点击"游戏助手"或访问 `/games`
2. 在游戏列表中选择想玩的游戏
3. 点击游戏卡片进入游戏页面

### 贪吃蛇玩法

1. 点击"开始游戏"或按空格键开始
2. 使用方向键或 WASD 控制蛇的方向
3. 吃掉食物来变长和得分
4. 避免撞墙或撞到自己
5. 游戏结束后可点击"重新开始"

### 2048 玩法

1. 点击"开始游戏"或按空格键开始
2. 使用方向键或 WASD 移动方块
3. 相同数字碰撞会合并成两倍数值
4. 目标是合成 2048 方块
5. 合成 2048 后可选择继续挑战更高分数

### 移动端操作

- **贪吃蛇**：在游戏区域滑动手指控制方向
- **2048**：在游戏区域滑动手指移动方块

---

## 📁 项目结构

```
src/
├── app/
│   └── games/
│       ├── page.tsx              # 游戏列表页
│       ├── snake/
│       │   └── page.tsx          # 贪吃蛇页面
│       └── 2048/
│           └── page.tsx          # 2048 页面
├── components/
│   └── games/
│       ├── GameCard.tsx          # 游戏卡片
│       ├── SnakeGame.tsx         # 贪吃蛇组件
│       ├── Game2048.tsx          # 2048 组件
│       └── index.ts
├── data/
│   └── games.ts                  # 游戏列表数据
└── types/
    └── games.ts                  # 游戏类型定义
```

---

## 🎨 UI 样式

### 设计规范

- **配色方案**：深色主题，赛博朋克风格
- **渐变效果**：每个游戏有独特的渐变色
- **玻璃态效果**：backdrop-blur 半透明背景
- **动画过渡**：平滑的 hover 和点击反馈

### 游戏主题色

| 游戏 | 渐变色 |
|------|--------|
| 贪吃蛇 | `from-green-500 to-emerald-500` |
| 2048 | `from-amber-500 to-yellow-500` |
| 打砖块 | `from-blue-500 to-cyan-500` |

---

## 🔧 扩展指南

### 添加新游戏

1. **创建游戏组件**：在 `components/games/` 下创建新组件
2. **创建游戏页面**：在 `app/games/{game-id}/page.tsx` 创建页面
3. **更新游戏数据**：在 `data/games.ts` 中添加游戏信息
4. **更新导出**：在 `components/games/index.ts` 中导出新组件

### 游戏组件模板

```typescript
"use client";

import { useState, useCallback } from "react";

export function NewGame() {
  const [gameState, setGameState] = useState("idle");

  const resetGame = useCallback(() => {
    // 初始化游戏逻辑
  }, []);

  const toggleGame = useCallback(() => {
    // 开始/暂停逻辑
  }, [gameState]);

  return (
    <div className="flex flex-col items-center gap-6">
      {/* 游戏内容 */}
    </div>
  );
}
```

### 更新游戏数据

```typescript
// data/games.ts
export const games: readonly Game[] = [
  // ... 现有游戏
  {
    id: "new-game",
    name: "新游戏",
    description: "游戏描述",
    icon: "Gamepad2",
    gradient: "from-purple-500 to-pink-500",
    status: "available",
  },
] as const;
```

---

## 🔗 相关链接

- [返回主文档](../README.md)
- [每日热点助手](./NEWS_ASSISTANT.md)
- [深度研究助手](./RESEARCH_ASSISTANT.md)
- [智能旅行助手](./TRAVEL_ASSISTANT.md)

---

## 📝 更新日志

### v1.1.0 (2026-01)

- ✅ 添加 2048 游戏
- ✅ 支持触摸滑动操作
- ✅ 修复游戏初始化问题

### v1.0.0 (2024-12)

- ✅ 完成贪吃蛇游戏
- ✅ 实现游戏列表页面
- ✅ 支持键盘控制
- ✅ 最高分本地存储
